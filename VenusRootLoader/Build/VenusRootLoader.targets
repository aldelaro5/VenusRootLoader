<Project>
    <UsingTask TaskName="GenerateBudManifest"
               AssemblyFile="$(MSBuildThisFileDirectory)/VenusRootLoader.Build.Tasks.dll"/>

    <Target Name="GenerateBudManifest" BeforeTargets="Build">
        <GenerateBudManifest
                AssemblyFile="$(TargetPath)"
                BudId="$(BudId)"
                BudName="$(BudName)"
                BudVersion="$(BudVersion)"
                BudAuthor="$(BudAuthor)"
                BudDependencies="@(BudDependency)"
                BudIncompatibilities="@(BudIncompatibility)"
        >
            <Output TaskParameter="BudManifestPath"
                    PropertyName="BudManifestFile"/>
        </GenerateBudManifest>
        <ItemGroup>
            <Content Include="$(BudManifestFile)"/>
        </ItemGroup>
    </Target>

    <Target Name="CleanBudManifest" AfterTargets="Clean">
        <Delete Files="$(TargetDir)/manifest.json"/>
    </Target>
</Project>